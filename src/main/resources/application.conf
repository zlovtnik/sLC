# Health Check and Log Aggregator configuration
app {
  name = "Health Check and Log Aggregator"
  version = "0.1.0"

  health-check {
    endpoints = [
      "http://localhost:8080/api",
      "http://localhost:8081/api",
      "http://localhost:8082/api"
    ]
    interval = 30s
    timeout = 10s
    connectivity-url = "https://www.google.com"
    parallelism = 4
  }

  log-aggregation {
    sources = [
      "logs/application.log",
      "logs/error.log",
      "/var/log/myapp/*.log"
    ]
    max-entries = 1000
    max-log-file-size = 104857600  # 100 MiB in bytes
    persist-dir = "persisted-logs"
  }

  server {
    host = "localhost"
    port = 8080
  }

  logging {
    level = "INFO"
    file = "logs/health-check-app.log"
  }

  redis {
    host = "localhost"
    host = ${?REDIS_HOST}
    port = 6379
    port = ${?REDIS_PORT}
    password = ${?REDIS_PASSWORD}
    database = 0
    database = ${?REDIS_DATABASE}
    timeout = 5s
    timeout = ${?REDIS_TIMEOUT}
    username = ${?REDIS_USERNAME}
  }

  database {
    url = "jdbc:postgresql://localhost:5432/slc"
    driver = "org.postgresql.Driver"
    user = "slc_user"
    password = "slc_password"
  }

  zio {
    logger {
      filter {
        rootLevel = INFO
        mappings {
          "com.rcs.healthcheck" = DEBUG
          "zio" = INFO
        }
      }
    }
  }
}